{"version":3,"sources":["events.js"],"names":["elGridView","elListView","list","jsondata","body","document","querySelector","modal","modalContent","modalCloseBtn","urlParams","URLSearchParams","window","location","search","_init","xhr","action","data","XMLHttpRequest","xhrUrl","onreadystatechange","readyState","DONE","responseData","JSON","parse","responseText","status","undefined","message","showModal","classList","contains","item","li","createElement","setAttribute","id","add","a","span","textContent","name","btn","appendChild","loader","fillProfileOverview","has","picture","innerHTML","birthday","email","address","bio","fillProfilePage","parseInt","get","open","isNaN","send","show","remove","content","hideclosebtn","addEventListener","e","preventDefault","confirmBtn","cancelBtn","encodeURIComponent","value","modalShow"],"mappings":"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","file":"build.js","sourcesContent":["'use strict';\n\nvar jsondata = [],\n    elGridView,\n    elListView,\n    list,\n    body = document.querySelector('body'),\n    modal = document.querySelector('.modal'),\n    modalContent = document.querySelector('.modal-content'),\n    modalCloseBtn = document.querySelector('.js-close-button'),\n    urlParams = new URLSearchParams(window.location.search);\n\n// Check if document is ready\ndocument.addEventListener('DOMContentLoaded', _init, false);\n\nfunction _init() {\n    // define functions\n    function xhr(action, data) {\n        var xhr = new XMLHttpRequest();\n        var xhrUrl = 'http://www.timoerlemans.nl/xhr/xhr.php';\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState == XMLHttpRequest.DONE) {\n                var responseData = JSON.parse(xhr.responseText);\n                if (responseData.status === 'fail' || responseData.status === 'error' || responseData.message !== undefined) {\n                    showModal(true, responseData.message, true);\n                }\n                var jsondata = responseData.data;\n                if (body.classList.contains('overview-page')) {\n                    fillProfileOverview(jsondata);\n                } else if (body.classList.contains('profile-page')) {\n                    // Using the relatively new urlSearchParams API to determine if the query string id is set (this doesn't work in IE)\n                    if (urlParams.has('id')) {\n                        fillProfilePage(\n                            jsondata,\n                            parseInt(urlParams.get('id'))\n                        );\n                    } else {\n                        showModal(true, '<p>Er is geen profielID gevonden, profiel kan niet weergegeven worden. <a href=\"/\">Ga terug naar het overzicht</a>.</p>', true);\n                        loader();\n                    }\n                } else if (body.classList.contains('create-profile')) {\n                    loader();\n                }\n            }\n        };\n        if (!action || action === 'read') {\n            xhr.open('GET', xhrUrl + '?type=read', true);\n        }\n        if (action === 'remove' && !isNaN(parseInt(data))) {\n            xhr.open('GET', xhrUrl + '?type=remove&id=' + data, true);\n        }\n        if (action === 'write') {\n            xhr.open('GET', xhrUrl + '?type=write&' + data, true);\n        }\n        xhr.send(null);\n    }\n\n    function fillProfileOverview(data) {\n        for (var item in data) {\n            var li = document.createElement('li');\n            li.setAttribute('id', data[item].id);\n            li.classList.add('profiles-list__item');\n            var a = document.createElement('a');\n            a.classList.add('profiles-list__preview');\n            a.setAttribute('href', '/profile.html?id=' + data[item].id);\n            var span = document.createElement('span');\n            span.classList.add('profiles-list__name');\n            span.textContent = data[item].name;\n            var btn = document.createElement('button');\n            btn.classList.add('btn--remove');\n            btn.textContent = 'x';\n            list.appendChild(li);\n            li.appendChild(a);\n            a.appendChild(span);\n            a.appendChild(btn);\n        }\n        loader(false);\n    }\n\n    function fillProfilePage(data, id) {\n        for (var item in data) {\n            if (data[item].id === id) {\n                document\n                    .querySelector('.js-profile-img')\n                    .setAttribute('src', data[item].picture);\n                document.querySelector('.js-profile-name').innerHTML =\n                    data[item].name;\n                document.querySelector('.js-profile-birthday').innerHTML =\n                    data[item].birthday;\n                document.querySelector('.js-profile-email').innerHTML =\n                    data[item].email;\n                document.querySelector('.js-profile-address').innerHTML =\n                    data[item].address;\n                document.querySelector('.js-profile-bio').innerHTML =\n                    data[item].bio;\n                loader();\n            }\n        }\n    }\n\n    function loader(show) {\n        if (show) {\n            document.querySelector('.loader').classList.remove('hidden');\n        } else {\n            document.querySelector('.loader').classList.add('hidden');\n        }\n    }\n\n    function showModal(show, content, hideclosebtn) {\n        if (show) {\n            modalContent.innerHTML = content;\n            modal.classList.add('open');\n        } else {\n            modal.classList.remove('open');\n            modalContent.innerHTML = '';\n        }\n        if (!hideclosebtn) {\n            modalCloseBtn.classList.remove('hidden');\n            modal.classList.remove('hide-all');\n        } else {\n            modalCloseBtn.classList.add('hidden');\n            modal.classList.add('hide-all');\n        }\n    }\n\n    function modalEvtLst() {\n        var confirmBtn = document.querySelector('.js-confirm-remove');\n        var cancelBtn = document.querySelector('.js-cancel-remove');\n        confirmBtn.addEventListener('click', function (e) {\n            xhr('remove', urlParams.get('id'));\n            loader(true);\n            showModal(false);\n        });\n        cancelBtn.addEventListener('click', function (e) {\n            showModal(false);\n        });\n    }\n\n    function createProfile(data) {\n        //\n    }\n\n    // define events\n\n    xhr();\n\n    if (body.classList.contains('overview-page')) {\n        elGridView = document.querySelector('.js-grid-view');\n        elListView = document.querySelector('.js-list-view');\n        list = document.querySelector('.profiles__list');\n\n        elGridView.addEventListener('click', function (e) {\n            e.preventDefault();\n            list.classList.add('profiles__list--grid');\n        });\n        elListView.addEventListener('click', function (e) {\n            e.preventDefault();\n            list.classList.remove('profiles__list--grid');\n        });\n    }\n    if (body.classList.contains('profile-page')) {\n        var removeBtn = document.querySelector('.js-remove-profile');\n        removeBtn.addEventListener('click', function (e) {\n            showModal(true, '<p>Weet je zeker dat je dit profiel wilt verwijderen?</p><button type=\"button\" class=\"js-confirm-remove\">Heel zeker</button><button type=\"button\" class=\"js-cancel-remove\">Niet zo zeker</button>');\n            modalEvtLst();\n        });\n    }\n\n    if (body.classList.contains('create-profile')) {\n        var createForm = document.querySelector('.js-create-profile');\n        createForm.addEventListener('submit', function (e) {\n        e.preventDefault();\n        loader(true);\n        var submitData = 'name=' + encodeURIComponent(document.querySelector('#name').value)\n        + '&birthday=' + encodeURIComponent(document.querySelector('#birthday').value)\n        + '&email=' + encodeURIComponent(document.querySelector('#emailaddress').value)\n        + '&address=' + encodeURIComponent(document.querySelector('#address').value)\n        + '&bio=' + encodeURIComponent(document.querySelector('#bio').value)\n        + '&picture=' + encodeURIComponent(document.querySelector('#picture').value);\n        xhr('write', submitData);\n    });\n    }\n\n    modalCloseBtn.addEventListener('click', function (e) {\n        modalShow(false);\n    });\n}\n"]}
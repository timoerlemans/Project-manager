{"version":3,"sources":["events.js"],"names":["elGridView","elListView","list","jsondata","body","document","querySelector","modal","modalContent","modalCloseBtn","urlParams","URLSearchParams","window","location","search","_init","xhr","action","data","XMLHttpRequest","xhrUrl","onreadystatechange","readyState","DONE","responseData","JSON","parse","responseText","status","showModal","message","classList","contains","item","li","createElement","setAttribute","id","add","a","span","textContent","name","btn","appendChild","loader","fillProfileOverview","has","picture","innerHTML","birthday","email","address","bio","fillProfilePage","parseInt","get","open","isNaN","send","show","remove","content","hideclosebtn","addEventListener","e","preventDefault","confirmBtn","cancelBtn","modalShow"],"mappings":"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","file":"build.js","sourcesContent":["'use strict';\n\nvar jsondata = [],\n    elGridView,\n    elListView,\n    list,\n    body = document.querySelector('body'),\n    modal = document.querySelector('.modal'),\n    modalContent = document.querySelector('.modal-content'),\n    modalCloseBtn = document.querySelector('.js-close-button'),\n    urlParams = new URLSearchParams(window.location.search);\n\n// Check if document is ready\ndocument.addEventListener('DOMContentLoaded', _init, false);\n\nfunction _init() {\n    // define functions\n    function xhr(action, data) {\n        var xhr = new XMLHttpRequest();\n        var xhrUrl = 'http://www.timoerlemans.nl/xhr/xhr.php';\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState == XMLHttpRequest.DONE) {\n                var responseData = JSON.parse(xhr.responseText);\n                if (responseData.status === 'fail' || responseData.status === 'error') {\n                    showModal(true, responseData.message, true);\n                }\n                var jsondata = responseData.data;\n                if (body.classList.contains('overview-page')) {\n                    fillProfileOverview(jsondata);\n                } else if (body.classList.contains('profile-page')) {\n                    // Using the relatively new urlSearchParams API to determine if the query string id is set (this doesn't work in IE)\n                    if (urlParams.has('id')) {\n                        fillProfilePage(\n                            jsondata,\n                            parseInt(urlParams.get('id'))\n                        );\n                    } else {\n                        showModal(true, '<p>Er is geen profielID gevonden, profiel kan niet weergegeven worden. <a href=\"/\">Ga terug naar het overzicht</a>.</p>', true);\n                        loader();\n                    }\n                } else if (body.classList.contains('create-profile')) {\n                    loader();\n                }\n            }\n        };\n        if (!action || action === 'read') {\n            xhr.open('GET', xhrUrl + '?type=read', true);\n        }\n        if (action === 'remove' && !isNaN(parseInt(data))) {\n            xhr.open('GET', xhrUrl + '?type=remove&id=' + data, true);\n        }\n        xhr.send(null);\n    }\n\n    function fillProfileOverview(data) {\n        for (var item in data) {\n            var li = document.createElement('li');\n            li.setAttribute('id', data[item].id);\n            li.classList.add('profiles-list__item');\n            var a = document.createElement('a');\n            a.classList.add('profiles-list__preview');\n            a.setAttribute('href', '/profile.html?id=' + data[item].id);\n            var span = document.createElement('span');\n            span.classList.add('profiles-list__name');\n            span.textContent = data[item].name;\n            var btn = document.createElement('button');\n            btn.classList.add('btn--remove');\n            btn.textContent = 'x';\n            list.appendChild(li);\n            li.appendChild(a);\n            a.appendChild(span);\n            a.appendChild(btn);\n        }\n        loader(false);\n    }\n\n    function fillProfilePage(data, id) {\n        for (var item in data) {\n            if (data[item].id === id) {\n                document\n                    .querySelector('.js-profile-img')\n                    .setAttribute('src', data[item].picture);\n                document.querySelector('.js-profile-name').innerHTML =\n                    data[item].name;\n                document.querySelector('.js-profile-birthday').innerHTML =\n                    data[item].birthday;\n                document.querySelector('.js-profile-email').innerHTML =\n                    data[item].email;\n                document.querySelector('.js-profile-address').innerHTML =\n                    data[item].address;\n                document.querySelector('.js-profile-bio').innerHTML =\n                    data[item].bio;\n                loader();\n            }\n        }\n    }\n\n    function loader(show) {\n        if (show) {\n            document.querySelector('.loader').classList.remove('hidden');\n        } else {\n            document.querySelector('.loader').classList.add('hidden');\n        }\n    }\n\n    function showModal(show, content, hideclosebtn) {\n        if (show) {\n            modalContent.innerHTML = content;\n            modal.classList.add('open');\n        } else {\n            modal.classList.remove('open');\n            modalContent.innerHTML = '';\n        }\n        if (!hideclosebtn) {\n            modalCloseBtn.classList.remove('hidden');\n            modal.classList.remove('hide-all');\n        } else {\n            modalCloseBtn.classList.add('hidden');\n            modal.classList.add('hide-all');\n        }\n    }\n\n    function modalEvtLst() {\n        var confirmBtn = document.querySelector('.js-confirm-remove');\n        var cancelBtn = document.querySelector('.js-cancel-remove');\n        confirmBtn.addEventListener('click', function (e) {\n            xhr('remove', urlParams.get('id'));\n            loader(true);\n            showModal(false);\n        });\n        cancelBtn.addEventListener('click', function (e) {\n            showModal(false);\n        });\n    }\n\n    function createProfile(data) {\n        //\n    }\n\n    // define events\n\n    xhr();\n\n    if (body.classList.contains('overview-page')) {\n        elGridView = document.querySelector('.js-grid-view');\n        elListView = document.querySelector('.js-list-view');\n        list = document.querySelector('.profiles__list');\n\n        elGridView.addEventListener('click', function (e) {\n            e.preventDefault();\n            list.classList.add('profiles__list--grid');\n        });\n        elListView.addEventListener('click', function (e) {\n            e.preventDefault();\n            list.classList.remove('profiles__list--grid');\n        });\n    }\n    if (body.classList.contains('profile-page')) {\n        var removeBtn = document.querySelector('.js-remove-profile');\n        removeBtn.addEventListener('click', function (e) {\n            showModal(true, '<p>Weet je zeker dat je dit profiel wilt verwijderen?</p><button type=\"button\" class=\"js-confirm-remove\">Heel zeker</button><button type=\"button\" class=\"js-cancel-remove\">Niet zo zeker</button>');\n            modalEvtLst();\n        });\n    }\n\n    modalCloseBtn.addEventListener('click', function (e) {\n        modalShow(false);\n    });\n}\n"]}